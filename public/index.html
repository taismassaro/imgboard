<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700,900&display=swap" rel="stylesheet"> -->
        <link
            href="https://fonts.googleapis.com/css?family=Poppins:300,400,700|Varela+Round&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/css/normalize.css" />
        <link rel="stylesheet" href="/css/style.css" />
        <script src="https://kit.fontawesome.com/4647f9cbe3.js"></script>
        <title>img_src - Image Board Single-Page Application</title>
    </head>
    <body>
        <header>
            <div id="logo"><span>img</span>_src</div>
        </header>
        <main>
            <section>
                <form autocomplete="off">
                    <input
                        v-model="form.title"
                        type="text"
                        name="title"
                        placeholder="title"
                    />
                    <input
                        v-model="form.description"
                        type="text"
                        name="description"
                        placeholder="description"
                    />
                    <input
                        v-model="form.username"
                        type="text"
                        name="username"
                        placeholder="username"
                    />

                    <input
                        @change="uploadFile"
                        type="file"
                        name="file"
                        id="file"
                        accept="image/*"
                    />
                    <label for="file"
                        ><i class="fas fa-plus"></i> {{uploaded}}</label
                    >
                    <button @click="submitInput">go</button>
                </form>
            </section>

            <section>
                <div id="img-container" v-if="images.length > 0">
                    <div
                        class="card"
                        v-for="img in images"
                        :key="img.url"
                        @click="toggleModal(img.id)"
                    >
                        <img :src="img.url" :alt="img.title" />
                        <p>{{img.title}}</p>
                    </div>
                </div>
            </section>

            <!-- VUE COMPONENT -->
            <img-modal
                v-if="showModal"
                :img-id="imgId"
                :show-modal="showModal"
                @hide="toggleModal"
            >
            </img-modal>
            <!-- VUE COMPONENT -->

        </main>

        <!-- VUE COMPONENT TEMPLATE -->
        <script id="modal-template" type="text/x-template">
            <div>
                <p @click="hideModal">X</p>
                <img :src="currentImg.url">
                <h1>{{currentImg.title}}</h1>
                <h2>{{currentImg.username}} {{currentImg.created_at}}</h2>
                <p>{{currentImg.description}}</p>

                    <form>
                    <input
                        v-model="form.username"
                        type="text"
                        name="username"
                        placeholder="username" required
                    />
                    <label for="comment">Comment:</label>
                    <textarea
                        v-model="form.comment"
                        id="text"
                        name="comment"
                        rows="4" cols="42"
                    ></textarea>
                    <button @click="sendComment">comment</button>
                </form>

                <div id="comments" v-if="comments.length > 0">
                    <div
                        v-for="comment in comments"
                    >
                        <p>{{comment.comment}}</p>
                        <p>{{comment.username}} {{comment.date}}</p>
                    </div>
                </div>

            </div>
        </script>
        <!-- VUE COMPONENT TEMPLATE -->

        <footer>
            A (not so safe) single-page application where anybody can go and
            upload an image of their choice.<br />Made with
            <span><i class="fas fa-heart"></i></span> and
            <a href="https://vuejs.org/" target="_blank">Vue.js</a> by
            <a href="https://github.com/taismassaro" target="_blank"
                >Ta√≠s Massaro</a
            ><br />@
            <a
                href="https://www.spiced-academy.com/program/full-stack-web-development/"
                target="_blank"
                >SPICED Academy</a
            >, 2019.
        </footer>
    </body>
    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js" charset="utf-8"></script>
</html>
